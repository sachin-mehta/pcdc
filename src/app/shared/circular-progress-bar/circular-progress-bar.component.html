<div role="button" class="circular-progress-container" (click)="handleClick()">
  <div class="ping-animation" *ngIf="(progressValue === 0 || secondLabel === 'TEST AGAIN') && !error"></div>
  <svg class="circular-progress-svg" viewBox="0 0 100 100">
    <circle class="circle-background" stroke-width="4" cx="50" cy="50" r="42" [attr.fill]="getFillColor()" [ngClass]="{
      'error': error,
      'gray' : progressValue > 0,
      'green': !error
    }"></circle>

    <circle class="circle-progress" stroke-width="4" stroke-linecap="round" cx="50" cy="50" r="42" fill="transparent"
      stroke-dasharray="263.9" [attr.stroke-dashoffset]="getStrokeDashOffset()" [ngClass]="{
        'error': error,
        'green': !error
      }"></circle>
    <image *ngIf="secondLabel === 'DOWNLOAD'" href="assets/images/download_meter.svg" width="8" height="8" x="15" y="36"
      alt="Error Icon" />
    <image *ngIf="secondLabel === 'UPLOAD'" href="assets/images/upload_meter.svg" width="8" height="8" x="24" y="36"
      alt="Error Icon" />
    <text *ngIf="secondLabel === 'DOWNLOAD' || secondLabel === 'UPLOAD'" x="54" y="44" [attr.font-size]="10"
      text-anchor="middle" alignment-baseline="top" [attr.font-weight]="400" [ngClass]="getTextClass()">
      {{ secondLabel === 'DOWNLOAD' ? ('startTest.download' | translate) : ('startTest.upload' | translate) }}
    </text>
    <text *ngIf="!error && !secondLabel" x="50" y="50" [attr.font-size]="16" text-anchor="middle"
      alignment-baseline="top" [ngClass]="getTextClass()" [attr.font-weight]="400">
      {{ firstLabel ? ('startTest.start' | translate) : '' }}
    </text>
    <text *ngIf="!error && !secondLabel" x="50" y="62" [attr.font-size]="16" text-anchor="middle"
      alignment-baseline="central" [ngClass]="getTextClass()" [attr.font-weight]="400">
      {{ firstLabel ? ('startTest.test' | translate): ''}}
    </text>
    <text *ngIf="error" x="51" y="46" [attr.font-size]="12" text-anchor="middle" alignment-baseline="top" [attr.font-weight]="400"
      [ngClass]="getTextClass()" >TRY AGAIN
      </text>
    <text *ngIf="completed" x="50" y="50" [attr.font-size]="12" text-anchor="middle" alignment-baseline="middle" [attr.font-weight]="400"
      [ngClass]="getTextClass()" >TRY AGAIN
      </text>

    <!-- <text x="57" y="50" [attr.font-size]="10" text-anchor="middle" alignment-baseline="top"
      [ngClass]="getTextClass()">
      {{ error ? 'TRY AGAIN' : secondLabel ? secondLabel : firstLabel }}
    </text> -->
    <text *ngIf="secondLabel === 'UPLOAD'" [attr.x]="currentRateUpload < 10 ? 32 : currentRateUpload > 99.9 ? 22 : 27" y="62" text-anchor="bottom" [attr.font-size]="18" text-anchor="bottom"  [attr.font-weight]="700" 
      [ngClass]="getGreenColorClass()" alignment-baseline="middle">
      {{currentRateUpload && currentRateUpload | number: '1.2-2'}}
    </text>
    <text *ngIf="secondLabel === 'DOWNLOAD'"  [attr.x]="currentRateDownload < 10 ? 32 : currentRateDownload > 99.9 ? 22 : 27" y="62" text-anchor="bottom" [attr.font-size]="18"
      text-anchor="bottom" [attr.font-weight]="700" alignment-baseline="middle" [ngClass]="getGreenColorClass()">
      {{ currentRateDownload && currentRateDownload | number: '1.2-2'}}
    </text>
    

    <!-- Fix: Use img for warning icon -->
    <image *ngIf="error" href="assets/images/test_error.svg" width="16" height="16" x="41" y="55" alt="Error Icon" />
    <!-- <image *ngIf="completed" href="assets/images/done.svg" width="16" height="16" x="41" y="55" alt="Error Icon" /> -->
    <!-- Fix: Replace ion-text with div for second label -->
    <!-- <div *ngIf="secondLabel" class="second-label">
        {{ secondLabel }}
      </div> -->
  </svg>
  <!-- <img *ngIf="error" src="assets/images/Warning.svg" class="aboutprojConn"/> -->

</div>
